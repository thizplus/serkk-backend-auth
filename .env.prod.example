# ========================================
# Production Environment Variables Template
# ========================================
# Use this as a checklist when setting up environment variables
# in DigitalOcean App Platform (Settings â†’ Environment Variables)
#
# IMPORTANT: DO NOT commit .env.prod with real values!
# This file is just a template/reference.
# ========================================

# Application Configuration
APP_NAME=SUEKK Auth Service
APP_PORT=${PORT}  # DigitalOcean auto-injects this variable
APP_ENV=production
FRONTEND_URL=https://your-production-domain.com

# Database Configuration
# DigitalOcean Managed Database - Map variables correctly:
# In DO App Platform, set these EXACT variable names:
DB_HOST=${db.HOSTNAME}       # DO auto-provides this
DB_PORT=${db.PORT}           # DO auto-provides this
DB_USER=${db.USERNAME}       # DO auto-provides this
DB_PASSWORD=${db.PASSWORD}   # DO auto-provides this
DB_NAME=${db.DATABASE}       # DO auto-provides this
DB_SSL_MODE=require          # CRITICAL: Must be 'require' in production!

# Redis Configuration
# Option 1: Use DigitalOcean Managed Redis
REDIS_HOST=${redis.HOSTNAME}
REDIS_PORT=${redis.PORT}
REDIS_PASSWORD=${redis.PASSWORD}
REDIS_DB=0

# Option 2: Use external Redis (e.g., Upstash, Redis Cloud)
# REDIS_HOST=your-redis-host.upstash.io
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# NATS Configuration
NATS_URL=nats://your-nats-server:4222
NATS_STREAM_NAME=USER_EVENTS
NATS_SUBJECT=user.events
NATS_DURABLE_NAME=auth-service
NATS_MAX_RETRIES=3
NATS_RETRY_WAIT=1
NATS_ENABLE_JETSTREAM=true

# JWT Configuration
# Generate a strong secret: openssl rand -base64 64
JWT_SECRET=<generate-strong-secret-minimum-64-characters>

# OAuth Configuration
# IMPORTANT: Update redirect URLs in OAuth provider consoles!

# Google OAuth
GOOGLE_CLIENT_ID=your-production-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-production-google-client-secret
GOOGLE_REDIRECT_URL=https://your-production-domain.com/api/v1/auth/google/callback

# Facebook OAuth
FACEBOOK_CLIENT_ID=your-production-facebook-app-id
FACEBOOK_CLIENT_SECRET=your-production-facebook-app-secret
FACEBOOK_REDIRECT_URL=https://your-production-domain.com/api/v1/auth/facebook/callback

# LINE OAuth
LINE_CLIENT_ID=your-production-line-channel-id
LINE_CLIENT_SECRET=your-production-line-channel-secret
LINE_REDIRECT_URL=https://your-production-domain.com/api/v1/auth/line/callback

# Backend Sync Configuration
# Point to your social service production URL
BACKEND_SYNC_URL=https://your-social-service-domain.com/internal/users/sync

# ========================================
# Deployment Checklist:
# ========================================
# [ ] Generate new JWT_SECRET (min 64 chars)
# [ ] Set DB_SSL_MODE to 'require'
# [ ] Update all OAuth redirect URLs to production domain
# [ ] Update OAuth credentials in provider consoles (Google, Facebook, LINE)
# [ ] Configure DigitalOcean Managed Database
# [ ] Set up Redis (managed or external)
# [ ] Configure NATS server URL
# [ ] Update FRONTEND_URL to production domain
# [ ] Update BACKEND_SYNC_URL to social service production URL
# [ ] Test all OAuth flows in production
# [ ] Verify database connections
# ========================================
